import{_ as D,o as h,c as d,a as e,w as u,v as f,F as p,r as m,f as S,n as g,z as y,l as x,A as _,e as v,t as c,B as b}from"./index-x5UqObBm.js";const P={data(){return{isVissForm:!1,isVissCal:!1,plantName:"",selectedFile:null,previewImage:null,wateringSchedule:"",lastWater:"",currentEditIndex:null,plants:JSON.parse(localStorage.getItem("plants"))||[]}},computed:{isFormValid(){return this.plantName&&this.wateringSchedule},today(){return new Date},overduePlants(){return this.plants.filter(n=>new Date(n.nextWater)<this.today)},dueTodayPlants(){return this.plants.filter(n=>{const t=new Date(n.nextWater);return t.getFullYear()===this.today.getFullYear()&&t.getMonth()===this.today.getMonth()&&t.getDate()===this.today.getDate()})},dueSoonPlants(){return this.plants.filter(n=>new Date(n.nextWater)>this.today)}},created(){this.name=localStorage.getItem("name")||"",this.plants=JSON.parse(localStorage.getItem("plants"))||[]},methods:{clearLocalStorage(){localStorage.removeItem("plants"),this.plants=[]},removePlant(n){this.plants.splice(n,1),this.saveData()},editPlant(n){const t=this.plants[n];this.plantName=t.name,this.previewImage=t.photo,this.wateringSchedule=t.waterSchedule,this.lastWater=t.lastWater,this.currentEditIndex=n},saveEdit(n){const t={name:this.plantName,photo:this.previewImage,waterSchedule:this.wateringSchedule,lastWater:this.lastWater,nextWater:this.dateHandle(this.lastWater,this.wateringSchedule)};this.plants.splice(n,1,t),this.saveData(),this.resetForm()},cancelEdit(){this.resetForm()},resetForm(){this.plantName="",this.selectedFile=null,this.previewImage=null,this.wateringSchedule="",this.$refs.fileInput.value=""},handleCheckboxChange(n){const t=new Date,s=this.dateHandle(t,n.waterSchedule);n.lastWater=t,n.nextWater=s,n.checked=!1,localStorage.setItem("plants",JSON.stringify(this.plants))},formatNextWater(n){const t={month:"short",day:"2-digit"};return new Date(n).toLocaleDateString(void 0,t)},toggleForm(){this.isVissForm=!this.isVissForm,this.isVissCal&&(this.isVissCal=!1)},toggleCal(){this.isVissCal=!this.isVissCal,this.isVissForm&&(this.isVissForm=!1)},updatePlants(n){this.plants=n},handleFileChange(n){const t=n.target.files[0];t&&this.compressImage(t).then(s=>{this.previewImage=s,this.saveData()}).catch(s=>{console.error("Image compression failed:",s)})},handleSubmit(){const n=new Date,t=this.dateHandle(n,this.wateringSchedule),s={name:this.plantName,photo:this.previewImage,waterSchedule:this.wateringSchedule,lastWater:n,nextWater:t,checked:!1};this.plants.push(s),this.saveData(),this.resetForm()},saveData(){const n=this.plants.map(t=>({name:t.name,photo:t.photo,waterSchedule:t.waterSchedule,lastWater:t.lastWater,nextWater:t.nextWater,checked:t.checked}));localStorage.setItem("plants",JSON.stringify(n))},dateHandle(n,t){let s=new Date(n);return t==="Daily"?s.setDate(s.getDate()+1):t==="Weekly"?s.setDate(s.getDate()+7):t==="Biweekly"?s.setDate(s.getDate()+14):t==="Monthly"&&s.setMonth(s.getMonth()+1),s},async compressImage(n,t=.7,s=300){return new Promise((w,i)=>{const a=new FileReader;a.onload=l=>{const o=new Image;o.onload=()=>{const r=document.createElement("canvas"),k=r.getContext("2d"),C=s/o.width;r.width=s,r.height=o.height*C,k.drawImage(o,0,0,r.width,r.height);const W=r.toDataURL("image/jpeg",t);w(W)},o.onerror=i,o.src=l.target.result},a.onerror=i,a.readAsDataURL(n)})}}},V=e("h1",null,"Welcome to the plant watering app!!! Still under development but feel free to check it out",-1),F={class:"calender"},N=e("h2",null,"Plant Watering Calendar",-1),I=e("br",null,null,-1),U=e("h3",null,"Please Note the checkboxes are disabled",-1),E=e("br",null,null,-1),M=e("h3",null,"Overdue",-1),B=["onUpdate:modelValue","onChange"],L=["src"],T=e("h3",null,"Due Today",-1),q=["onUpdate:modelValue","onChange"],O=["src"],H=e("h3",null,"Due Soon",-1),J=["onUpdate:modelValue","onChange"],R=["src"],A={class:"plantform"},Y=e("h1",null,"Plant Information Form",-1),z=e("label",{for:"plantName"},"Name:",-1),j=e("br",null,null,-1),G=e("label",{for:"plantPhoto"},"Photo:",-1),K=e("br",null,null,-1),Q=e("label",{for:"wateringSchedule"},"Watering Schedule:",-1),X=b('<option disabled value="">Select Schedule</option><option value="Daily">Daily</option><option value="Weekly">Weekly</option><option value="Biweekly">Biweekly</option><option value="Monthly">Monthly</option>',5),Z=[X],$=e("br",null,null,-1),ee=["disabled"],te={key:0},le=e("h3",null,"Photo Preview:",-1),ne=["src"],ae={class:"plantlist"},se=e("h2",null,"Plant List",-1),oe=e("p",null,"Please note updating info is messy right now",-1),ie={key:0},re=e("h3",null,"Edit Plant",-1),he=["onSubmit"],de=e("label",{for:"plantName"},"Name:",-1),ue=e("br",null,null,-1),ce=e("label",{for:"plantPhoto"},"Photo:",-1),pe=e("br",null,null,-1),me=e("label",{for:"wateringSchedule"},"Watering Schedule:",-1),ge=b('<option disabled value="">Select Schedule</option><option value="Daily">Daily</option><option value="Weekly">Weekly</option><option value="Biweekly">Biweekly</option><option value="Monthly">Monthly</option>',5),_e=[ge],ve=e("br",null,null,-1),we=e("label",{for:"lastWater"},"Last Watered:",-1),fe=e("br",null,null,-1),Se=e("button",{type:"submit"},"Save",-1),ye={key:1},be=["src"],ke=["onClick"],Ce=["onClick"];function We(n,t,s,w,i,a){return h(),d("div",null,[V,e("button",{onClick:t[0]||(t[0]=(...l)=>a.toggleForm&&a.toggleForm(...l))},"show/hide form"),e("button",{onClick:t[1]||(t[1]=(...l)=>a.toggleCal&&a.toggleCal(...l))},"show/hide callender"),u(e("div",F,[N,I,U,E,M,e("div",null,[(h(!0),d(p,null,m(a.overduePlants,l=>(h(),d("section",{class:"calendercard",key:l.name},[u(e("input",{type:"checkbox","onUpdate:modelValue":o=>l.checked=o,onChange:o=>a.handleCheckboxChange(l)},null,40,B),[[_,l.checked]]),v(),e("span",null,c(l.name)+" ",1),e("p",null," Due: "+c(a.formatNextWater(l.nextWater)),1),e("img",{src:l.photo,alt:"Plant photo"},null,8,L)]))),128))]),T,e("div",null,[(h(!0),d(p,null,m(a.dueTodayPlants,l=>(h(),d("section",{class:"calendercard",key:l.name},[u(e("input",{type:"checkbox","onUpdate:modelValue":o=>l.checked=o,onChange:o=>a.handleCheckboxChange(l)},null,40,q),[[_,l.checked]]),v(),e("span",null,c(l.name)+" ",1),e("p",null," Due: "+c(a.formatNextWater(l.nextWater)),1),e("img",{src:l.photo,alt:"Plant photo"},null,8,O)]))),128))]),H,e("div",null,[(h(!0),d(p,null,m(a.dueSoonPlants,l=>(h(),d("section",{class:"calendercard",key:l.name},[u(e("input",{type:"checkbox","onUpdate:modelValue":o=>l.checked=o,onChange:o=>a.handleCheckboxChange(l)},null,40,J),[[_,l.checked]]),v(),e("span",null,c(l.name)+" ",1),e("p",null," Due: "+c(a.formatNextWater(l.nextWater)),1),e("img",{src:l.photo,alt:"Plant photo"},null,8,R)]))),128))])],512),[[f,i.isVissCal]]),u(e("div",A,[Y,e("form",{onSubmit:t[5]||(t[5]=S((...l)=>a.handleSubmit&&a.handleSubmit(...l),["prevent"]))},[z,u(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=l=>i.plantName=l),name:"plantName",required:""},null,512),[[g,i.plantName]]),j,G,e("input",{type:"file",accept:"image/*",ref:"fileInput",onChange:t[3]||(t[3]=(...l)=>a.handleFileChange&&a.handleFileChange(...l))},null,544),K,Q,u(e("select",{"onUpdate:modelValue":t[4]||(t[4]=l=>i.wateringSchedule=l),name:"wateringSchedule",required:""},Z,512),[[y,i.wateringSchedule]]),$,e("button",{type:"submit",disabled:!a.isFormValid},"Submit",8,ee)],32),i.previewImage?(h(),d("div",te,[le,e("img",{src:i.previewImage,alt:"Plant photo preview",style:{"max-width":"100%",height:"auto"}},null,8,ne)])):x("",!0)],512),[[f,i.isVissForm]]),e("div",ae,[se,oe,e("button",{onClick:t[6]||(t[6]=(...l)=>a.clearLocalStorage&&a.clearLocalStorage(...l))},"Clear All Plants"),e("ul",null,[(h(!0),d(p,null,m(i.plants,(l,o)=>(h(),d("li",{key:o},[i.currentEditIndex===o?(h(),d("div",ie,[re,e("form",{onSubmit:S(r=>a.saveEdit(o),["prevent"])},[de,u(e("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=r=>i.plantName=r),required:""},null,512),[[g,i.plantName]]),ue,ce,e("input",{type:"file",accept:"image/*",ref_for:!0,ref:"fileInput",onChange:t[8]||(t[8]=(...r)=>a.handleFileChange&&a.handleFileChange(...r))},null,544),pe,me,u(e("select",{"onUpdate:modelValue":t[9]||(t[9]=r=>i.wateringSchedule=r),required:""},_e,512),[[y,i.wateringSchedule]]),ve,we,u(e("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=r=>i.lastWater=r),required:""},null,512),[[g,i.lastWater]]),fe,Se,e("button",{onClick:t[11]||(t[11]=(...r)=>a.cancelEdit&&a.cancelEdit(...r))},"Cancel")],40,he)])):(h(),d("div",ye,[e("strong",null,c(l.name),1),e("img",{src:l.photo,alt:"Plant photo"},null,8,be),e("button",{onClick:r=>a.editPlant(o)},"Edit",8,ke),e("button",{onClick:r=>a.removePlant(o)},"Remove",8,Ce)]))]))),128))])])])}const xe=D(P,[["render",We]]);export{xe as default};
